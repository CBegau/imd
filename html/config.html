<HTML>
<HEAD>
   <TITLE>IMD Configurations</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF">

<H1>IMD Configurations</H1>

The starting configuration of an IMD simulation is usually read from 
a configuration file, whose format is described below. Also,
at every checkpoint IMD writes the current configuration to a file
in the same format, so that it can be used to restart the simulation,
or as a starting configuration to a different simulation. 
There are <A HREF="samples.html">utility programs</A> to generate 
configuration files for several kinds of structures.
Certain special types of configurations can also be 
<A HREF="#generated">generated</A> directly by IMD. Note that there 
are some issues with <A HREF="#boundary">boundary conditions</A> to
be considered.

<H2>Configuration Files</H2>

An IMD configuration file is an ASCII file, which contains one
line for each atom. The format is for each line is:

<P><TABLE>
<TR><TD>in 2d:   <TD>number type mass x y [vx vy]
<TR><TD>in 3d:   <TD>number type mass x y z [vx vy vz]
</TABLE>
<P>
These items stand for:
<P><TABLE>
<TR><TD>number	    <TD>number of the atom; should be unique
<TR><TD>type        <TD>type of the atom; must be in the range [0..ntypes-1]
<TR><TD>mass        <TD>mass of the atom; must be positive
<TR><TD>x y z       <TD>coordinates of the atom
<TR><TD>vx vy vz    <TD>velocity components of the atom
</TABLE>
<P>
Note that:
<UL>
<LI> the sample size has to be at least 2 times the potential
     cutoff-distance in each direction.
<LI> if <A HREF="#boundary">free boundary conditions</A> are used,
     it is the user's responsibility that the system fits into the
     simulation box (spanned by the box vectors starting at the
     origin). With <A HREF="#boundary">periodic boundary conditions</A>, 
     atoms outside the box are mapped back into the box.
<LI> if there are atoms with missing velocities in the input file,
     the initial velocities are set to some random Maxwell
     distribution with the desired temperature.
</UL>

<H2>Configuration Files for <a href=uniax.html>UNIAX</a></H2>

In case that the option <a href=uniax.html>UNIAX</a> is switched on
(uniaxial molecules interacting via the Gay-Berne pair potential),
the data structure of the IMD configuration
file is enlarged. Again, the ASCII file contains one
line for each atom. The format is for each line now is: <br>

<TD>number type mass inertia rx ry rz ux uy uz sx sy
sz ex ey ez [vx vy vz wx wy wz]
<P>
These items stand for:
<P><TABLE>
<TR><TD>number	    <TD>number of the molecule; should be unique
<TR><TD>type        <TD>type of the molecule; must be set equal to 1
<TR><TD>mass        <TD>mass of the molecule; must be positive
<TR><TD>inertia     <TD>moment of inertia of the molecule; must be positive
<TR><TD>rx ry rz    <TD>coordinates of the center of mass of the molecule
<TR><TD>ux uy uz    <TD>cartesian components of the unit vector
pointing along the main axis of the molecule
<TR><TD>sx sy sz    <TD>lengths of the main axes of uniaxial
ellipsoid; sx must be sy, original version is sx : sy : sz = 1 : 1 : 3 
<TR><TD>ex ey ez    <TD>energy for the potential well depths for
parallel molecules along principal axes; ex must be ey, original
version is ex : ey : ez = 1 : 1 : 0.2
<TR><TD>vx vy vz    <TD>velocity components of the molecule
<TR><TD>wx wy wz    <TD>angular velocity components of the molecule
</TABLE>
<P>
Note that:
<UL>
<LI> Only the 3D version of the Gay-Berne model is implemented.
<LI> If <A HREF="#boundary">free boundary conditions</A> are used,
     it is the user's responsibility that the system fits into the
     simulation box (spanned by the box vectors starting at the
     origin). With <A HREF="#boundary">periodic boundary conditions</A>, 
     atoms outside the box are mapped back into the box.
<LI> If there are atoms with missing velocities and angular velocities
     in the input file, the initial velocities and angular velocities
     are set according to a Maxwell-Boltzmann
     distribution with the desired temperature.
</UL>

<A NAME="makeconfig"> 
<H2>Making Configurations Files</H2>
</A>
<P>
There are <A HREF="samples.html">utility programs</A> to generate 
configuration files for several kinds of structures.
<P>
<A NAME="generated"> 
<H2>Generated Configurations</H2>
</A>
If the input configuration file name (parameter <TT>coordname</TT>) starts
with a underscore, IMD tries to interpret it and computes the initial atom
positions, rather than reading them in. The following generated structures
are supported:
<TABLE>
<TR><TD>_fcc      <TD> fcc crystal (3D)
<TR><TD>_bcc      <TD> bcc crystal (3D)
<TR><TD>_nacl     <TD> NaCl crystal structure (3D)
<TR><TD>_b2       <TD> crystal with B2 (CsCl) structure (3D)
<TR><TD>_lav      <TD> a Laves phase (3D)
<TR><TD>_tiqc     <TD> truncated icosahedra quasicrystal (3D)
<TR><TD>_hex      <TD> hexagonal crystal (2D)
</TABLE>
The size of the configuration is specified with the parameter
<TT>box_param</TT>, an integer vector, and an optional scale
parameter <tt>box_unit</tt>. For all generated structures,
the masses of the different atoms types can be specified with
the parameter <tt>masses</tt>, which requires <tt>ntypes</tt>
real values.
<p>
For the cubic structures _fcc, _bcc, _nacl, and _b2, all three 
box parameters must be positive, even integers. They specify the
dimensions of a rectangular block of a simple cubic lattice with
lattice parameter 1. The atom positions are obvious subsets of these
simple cubic lattice sites. In addition, the whole structure can
be scaled by the real parameter <tt>box_unit</tt> (default: 1),
so that, e.g., an _fcc structure with nearest neighbor distance 
sqrt(2.0)*<tt>box_unit</tt> is obtained. 
<p>
For the Laves crystal _lav, all three box parameters must be positive, 
even integers. The structure can be scaled by the real parameter
<tt>box_unit</tt> (default: 1).
<p>
For the 2D hexagonal _hex structure, the dimension of the sample is 
<TT>box_param.x*sqrt(3)*box_unit</TT> in x-direction, and 
<TT>box_param.y*box_unit</TT> in y-direction. The nearest 
neighbor distance is <tt>box_unit</TT> (default: 1).
<P>
For the quasicrystalline _tiqc phase, an approximant with a
rectangular box is created. The three parameters are the orders
of the Fibonacci approximant in the three directions. For the
_tiqc structure, scaling by <tt>box_unit</tt> is not yet supported.
The <TT>_tiqc</TT> structure is an approximant of a truncated
icosahedra quasicrystals (tiqc, truncated icosahedra clusters are also
known as Bergman clusters). It requires the component <TT>quasi</TT> 
to be contained in the <A HREF="compiling.html">compilation target</A>.
The tiqc are simple decorations of the standard rhombohedra
icosahedral quasicrystals in three dimensions. Every vertex and every 
edge center is occupied by an atom of type A (small atom). Every long 
diagonal of the prolate rhombohedron is decorated with two atoms of 
type B (large atoms). The diagonal is divided in the ratio 1:tau:1, 
where tau is the golden mean.
<P>
Only the simplest case is implemented here. It is needed only if
the number of particles to be simulated is so large that the 
configuration cannot be stored on disk. For practical simulations 
this will rarely be the case. For all other cases, there is a more
versatile, stand alone <A HREF="samples.html">utility program</A>
for the generation of quasicrystals. 
<P>
<A NAME="boundary"> 
<H2>Boundary Conditions</H2>
</A>
IMD uses <B>periodic boundary</B> conditions by default. Whenever 
particles leave the simulation box, or if they are outside the 
simulation box when they are read from a configuration file, they 
are mapped back into the simulation box. In the computation of the 
forces, the minimal image convention is used.
<P>
Periodic boundary conditions can be <B>switched off</B> in one or 
several directions by reading in the parameter <TT>pbc_dirs</TT>,
which is a vector. A value of 1 means periodic boundary condition
in that direction, a value of 0 means free boundary condition.
Certain ensembles and options, notably <TT>frac</TT> and
<TT>deform</TT>, require that periodic boundary conditions are
switched off in this way. It is then the user's responsibility
that the sample fits into the box. This is necessary in order that
particles are evenly distributed into cells. As a particle is put
into the nearest cell, samples much bigger than the simulation box
will result in overfull border cells, which means serious performance
degradation. Apart from that, there is no further problem. Likewise, 
if the sample is much smaller than the simulation box, there will be 
empty or almost empty cells, which will lead to load balancing problems
in the parallel version (but not in the serial version). It is
therefore wise to choose the box so that it is exactly filled by 
the sample. There is no harm if a few atoms then leave the box during 
the  simulation.
<P>
Note that the option <B>shock</B> needs <B>periodic</B> boundary 
conditions in y and z direction, but <B>free</B> boundary conditions 
in x direction.

<P>
<A HREF="imd.html">Back to IMD User's Guide</A> 

</BODY>
</HTML>
