<HTML>
<HEAD>
   <TITLE> Release Notes for IMD 1.3 </TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF">

<H1>Release Notes for IMD 1.3 beta</H1>

This document describes changes of IMD 1.3 from the previous version 1.2.
This description is intended for users who have already worked with IMD.

<P><H2>New Features</H2>
<UL>
<P>
<LI> <B>Multiple MD integrators in the same binary</B> 
<P>
It is now possible to compile several MD integrators into the same
IMD binary. 
<BR>Example: 
<P><TT>gmake imd_risc_nve_nvt</TT><P>
will produce a binary that supports both the NVE and the NVT ensembles. 
<P>
Which integrator is actually used is determined by a new parameter
<TT>ensemble</TT>, which may take the values
<TT> nve, mik, nvt, npt_iso, npt_axial, and, mc, frac, pull. </TT>
<P>
The <TT>ensemble</TT> parameter is <B>required</B>.
<P>
It is recommended that only those MD integrators are included which
are actually needed.

<P> 
<LI> <B>Old parameter file format has been disabled</B> 
<P>
Yes, this is a feature! The old format really was a pain in the neck...
<P>
Since the old parameter file format does not supported the new
(required) ensemble parameter, it has now happily been eliminated.

<P> 
<LI> <B>Multiphase simulations</B> 
<P>
An IMD simulation can now consist of several phases. Many parameters,
in particular the MD integrator to be used, can change from one
phase to the next. Simulation phases are numbered consecutively,
from 1 to N. The parameter file contains first the parameters for
phase 1, then the parameters for phase 2, etc. The start of the
parameter file section for phase n is announced with a line
<PRE>
simulation n
</PRE>
Announcing the parameters for the first phase is optional. Before
phase n is started, the parameters of all phases up to n are
(re-)read. If a certain parameter is not given afresh for the new
phase, its value from the previous phase (or its default value)
is retained. In other words, only paramters whose values have changed
need be given for the later phases.
<P>
Certain parameters <B>must not be changed</B> during the simulation, 
like the box size. Also, it is probably a good idea to take care that 
the external temperature and pressure are continuous throughout the 
simulation. It is the <B>user's responsibility</B> that the parameter
starttemp is equal to the parameter endtemp of the previous phase. 
A similar statement holds for the external pressure.
<P>
Example of a parameter file with 4 phases:
<PRE>
simulation      1     # this line is not really needed
ensemble        nvt   # nvt ensemble
maxsteps        1000  # phase stops at step 1000
starttemp       0.1   # starting temperature
endtemp         0.1   # ending temperature - temperature remains constant

other parameters for phase 1 (and the other phases)

simulation      2
maxsteps        2000  # phase stops at step 2000
starttemp       0.1   # not needed - does not change
endtemp         0.5   # ending temperature - temperature increases linearly

simulation      3
maxsteps        3000  # phase stops at step 3000
starttemp       0.5   # this IS needed - temperature should be continuous
endtemp         0.5   # not needed

simulation      4
maxsteps        4000  # phase stops at step 4000
ensemble	nve   # we continue with nve ensemble
</PRE>
All four phases last 1000 steps. The first three use the nvt ensemble,
the last one the nve ensemble. In the second phase, the system is 
heated linearly from temperature 0.1 to temperature 0.5. Note that
the parameter maxsteps is the step number at which the simulation
phase ends, not the number of steps in the simulation phase.


<P> 
<LI> <B>"Current" initial temperature or pressure</B> 
<P>
There are now two parameters <TT>use_current_temp</TT> and
<TT>use_current_pressure</TT>, which take no arguments.
If present, they instruct IMD to set the starting external
temperature or pressure for the current phase to the actual 
system temperature or pressure (after one more step).
If the parameters <TT>starttemp</TT> or <TT>pressure_ext</TT>
are present as well, their values will be used for the first step.
<B> Beware:</B> If there are no initial velocities in the configuration
file, and no numerical initial temperature is given, strange things
will happen...

<P> 
<LI> <B>Restart facilities reworked / iteration file format changed</B> 
<P>
Iteration files are now written in the same format as the (new) 
parameter files, i.e. in name-value pairs. The current step number
is written as a parameter <TT>startstep</TT>, which is
read upon restart. The current external temperature and, in NPT
simulations, the external pressure are also written to the iteration
file and read back upon restart. The usage of the restart facility
is unchanged, but iteration files from previous versions of IMD
won't work anymore. 

<P> 
<LI> <B>Generate quasicrystal</B> 
<P>
This feature is rather special and needed only if the number of
particles to be simulated is so large that the configuration
cannot be stored on disk. For practical simulations this will 
rarely be the case.
<P>
IMD allows to generated truncated icosahedra quasicrystals (tiqc,
truncated icosahedra clusters are also known as Bergman clusters). The
tiqc are simple decorations of the standard rhombohedra icosahedral
quasicrystals in three dimensions. Every vertex and every edge center
is occupied by an atom of type A (small atom). Every long diagonal of the
prolate rhombohedron is decorated with two atoms of type B (large
atoms). The diagonal is divided in the ratio 1:tau:1,
where tau is the golden mean. 
<P>
We have implemented only the simplest case of the tiqc model, where 
the simulation box is spanned by a triple of othogonal vectors 
in two-fold directions. Since we use periodic boundary conditions
the quasicrystal is actually an approximant. Only Fibonacci number 
approximants are permitted. This allows us to characterize the 
approxmiant by three Fibonacci numbers for the size of the three 
coordination axis.
<P>
To enter the size of the approximant we have abused the box array
which normally contains the periodic box vectors. For the generation
of a quasicrystal the diagonal elements should contain the order of
the approximant in the corresponding direction. The file name for 
the particle coordinates must be chosen as <TT>.tiqc</TT>, and
the component <TT>quasi</TT> must be contained in the 
<A HREF="compiling.html">compilation target</A>.

<P> 
<LI> <B>Simulate shockwave</B> 
<P>
It is now possible to simulate shockwaves with IMD. A shockwave is
generated in the following way: We use a box which is  periodic
along the y- and z-axis. Along the x-axis there are
free boundaries. The shockwave is generated by setting the velocities
of the atoms in routine imd_maxwell within a strip
<TT>shock_strip</TT> orthogonal to the x-axis to a large constant
value <TT>shock_speed</TT>. The velocity direction is in the positive 
x-axis. 
<P>
<B>Important</B>: Currently, the atom velocities for the shockwave
are set by the routine imd_maxwell, which is called at the start
of the simulation only. It is therefore not possible to start
a shockwave in a later phase of a multiphase simulation. This
might be added in the future.

<P> 
<LI> <B>MSQD updated</B> 
<P>
The mean square displacements are now written every <TT>correl_ts</TT>
steps to a file <TT>&lt;outfiles&gt;.msqd</TT>, instead of the energy
file. This removes some of the confusion inside the energy file. 

<P> 
<LI> <B>Bugfix for periodic boundary conditions</B> 
<P>
If periodic boundary conditions are active, and the starting
configuration contains particles outside the box, these are now
mapped back into the box. Without periodic boundary conditions
(frac, pull, shear), however, this cannot sensibly be done, and
so it is still the users responsibility to make sure that the
configuration fits into the simulation box.

<P> 
<LI> <B>Preprocessor flag EPOT_DIFF eliminated</B> 
<P>
The preprocessor flag EPOT_DIFF has been eliminated. Its functionality
is now built into the option <A HREF="options.html#disloc">DISLOC</A>.

<P> 
<LI> <B>Utility program imd_pair.c</B> 
<P>
The utility program <A HREF="utilities.html#imd_pair">imd_pair</A> has been 
converted to the new parameter file format. Support for 2D has been added.

<P> 
<LI> <B>mikshear, the former shear, is now an ensemble</B> 
<P>
<A HREF="ensembles.html#mikshear">mikshear</A> has become an ensemble,
i.e., it has an ensemble value mikshear, and uses a unique integrator 
(mik). This allows to make it multiphase ready.

<P> 
<LI> <B>Multiphase capabilities improved</B> 
<P>
Most initializations are now done for each phase separately.  
Therefore, frac, pull and mikshear are now multiphase ready.
But not shock, unfortunately.

<P> 
<LI> <B>Binary energy distributions</B> 
<P>
<A HREF="output.html#distributions">Energy distribution files</A> 
can now be written in binary form. Moreover, a 
<A HREF="output.html#distributions">minmax file</A> is now written.

<P> 
<LI> <B>Energy distributions have been improved</B> 
<P>
<A HREF="output.html#distributions">Energy distribution files</A> 
contain now energies per atom, so that fluctuation due to different
occupation numbers are reduced.

<P> 
<LI> <B>Writing potential energy difference can be switched off</B> 
<P>
The writing of the potential energy difference under the 
<A HREF="options.html#disloc">disloc</A> option can be switched
off by setting <TT>Epot_diff</TT> to 0 (default is 1).

<P> 
<LI> <B>Hexagonal crystals</B> 
<P>
Hexagonal crystals can now be <A HREF="config.html#generated">generated</A>.

<P> 
<LI> <B>parallel_io</B> 
<P>
The parameter <TT>parallel_io</TT> has been replaced by two
parameters, <TT>parallel_input</TT> and <TT>parallel_output</TT>.
<TT>parallel_input</TT> is 1 by default - there is no reason not
to read in parallel. <TT>parallel_output</TT> is 0 by default.

<P> 
<LI> <B>Sockets and VolIMD</B> 
<P>
Socket communication and <A HREF="onlinevis.html">support for VolIMD</A> 
has been improved. IMD and VolIMD now negociate whether an endian byte
swap is necessary. The VolIMD hos is now specified with the parameter
<TT>display_host</TT>.



</UL>

<H2>Developer's Corner</H2>
<UL>
<LI> The serial version of IMD now also knows a variable
<TT>myid</TT>, whose value always is zero (in the MPI version,
it is the CPU number). This can save quite a few <TT>"#ifdef MPI"</TT>.

</UL>


<H2>Known Bugs</H2>
<UL>

<P> 
<LI> <B>Certain features are not yet multiphase ready</B> 
<P>
Note that certain features are not yet multiphase ready. 
The problem is that they are always active, once they are
compiled into the binary. Such a feature is 
<A HREF="options.html#shock">shock</A>, which
can be used only for the first phase.
See also the issues with <A HREF="config.html#boundary">boundary 
conditions</A> and other <A HREF="limitations.html">limitations</A>.

</UL>

<P>
<A HREF="imd.html">Back to IMD User's Guide</A> 

</BODY>
</HTML>
