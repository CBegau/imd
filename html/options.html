<HTML>
<HEAD>
   <TITLE>IMD Options</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF">

<H1>IMD Options</H1>

In addition to selecting the <A HREF="ensembles.html">simulation ensemble</A>
(i.e., the MD integrator), various options can be compiled into IMD. 
Some options can be part of the <A HREF="compiling.html">compilation 
target</A>, others can only be invoked by <A HREF="compiling.html"> 
preprocessor flags</A>.
<P>
We give here a list of all possible options, and describe here what 
their purpose is and how they are used.

<H2>Possible Options in the Compilation Target</H2>

<UL>

<A NAME="2d">
<P><LI><B>2d</B><P>
</A>
2d simulation rather than 3d. The option 3d also exists - it is the
default.

<A NAME="msqd">
<P><LI><B>msqd</B><P>
</A>
This option enables the computation of the <B>mean square 
displacements</B> (MSQDs) (for each atom type separately). 
It shares its parameters with the option correl. 
The computation of the MSQDs is started at step 
<TT>correl_start</TT>, and ends at step <TT>correl_end</TT>. 
The reference positions are first stored at step 
<TT>correl_start</TT>, and then they are reset every
<TT>correl_int</TT> steps (or never, if <TT>correl_int=0</TT>, 
which is the default). The MSQDs are computed every <TT>correl_ts</TT> 
steps between <TT>correl_start</TT> and <TT>correl_end</TT>,
and are written to the file <TT>&lt;outfiles&gt;.msqd</TT>,
preceeded by the current simulation time.
<P>
The parameters <TT>correl_start</TT> and <TT>correl_end</TT> can be
used to switch this option on and off during a multiphase simulation. 

<A NAME="correl">
<P><LI><B>correl</B><P>
</A>
This option enables the computation of the (spherically averaged)
<B>van Hove self-correlation function</B> (VHSCF).
<P>
The computation of the VHSCF is started at step 
<TT>correl_start</TT>, and ends at step <TT>correl_end</TT>. 
Every <TT>correl_int</TT> steps after <TT>correl_start</TT>, 
the correlation histogram is written to files 
<TT>&lt;basename&gt;.corr&lt;n&gt.&lt;i&gt;</TT>,
where <TT>&lt;n&gt;</TT> is a running number and 
<TT>&lt;i&gt;</TT> ist the atom type. Every <TT>correl_ts</TT>
steps, correlation data is added to the histogram.
<P>
The dimension of the correlation histogram is detemined by the
parameters <TT>correl_tmax</TT> (time direction) and 
<TT>correl_rmax</TT> (radial direction). The step width
of the histogram is <TT>correl_ts</TT> in time direction,
and (half) the diagonal of the box, divided by <TT>correl_rmax</TT>,
in radial direction.
<P>
There are several modes for the output format, determined by the
parameter <TT>correl_omode</TT>:
<PRE>
 1  for gnuplot files with 1 empty line between blocks
 2  for gnuplot files with 2 empty lines between blocks
 3  for large gnuplot files (fully occupied matrix) with no empty lines
 4  for short files (refer to source for documentation)
    (writes only a short header followed by matrix elements)
</PRE>
The third mode uses a further parameter, <TT>GS_rcut</TT>, which is
a cutoff radius for the data to be written.
<P>
The parameters <TT>correl_start</TT> and <TT>correl_end</TT> can be
used to switch this option on and off during a multiphase simulation. 
<B>Beware:</B> in the current implementation, the histogram is allocated only
once at the beginning of the simulation, and so the dimensions of the 
histogram must not change during the simulation!

<P>
<B>Known bugs:</B>
<P>
Resetting the reference positions <TT>every correl_int</TT> 
steps is fine, but why do we have to write out and clear the histogram
each time?
<P>
The time in the histogram is taken modulo <TT>correl_tmax</TT>,
but the reference positions are not reset, which spoils the
whole histogram, if <TT>correl_tmax &gt; correl_int</TT>! 
<P>
Why don't we use a radial cutoff of the histogram right away, 
instead of the wiered constuction with the diagonal, which works 
only for orthogonal boxes anyway? In any case, it is better
not to compute the parts of the histogram that are not needed,
instead of just not writing them out (parameter GS_rcut)!

<A NAME="disloc">
<P><LI><B>disloc</B><P>
</A>
The disloc option enables certain features useful to see dislocations.
<P>
If the disloc option is present, reference potential energies are
provided for each particle. A differential potential energy (DE) is
computed from the current and the reference value. Particles with DEs
exceeding a threshold <TT>min_dpot</TT> (default 1.0) are
plotted. This is done for only one type of atoms specified in
<TT>dpotsorte</TT> (default 0).
<P> 
If the parameter
<TT>calc_Epot_ref</TT> is set to 0 (default) the reference potential
energy is read from a file specified in <TT>reffile</TT>. This is a
normal checkpoint file which must contain the same particles at the
same line as the input file. IMD checks the atom number (actually the
absolute value of the atom number, so that fixed atoms are not a
problem). If <TT>calc_Epot_ref</TT> is set to 1, the potential energy
at step <TT>reset_Epot_ref</TT> (default: 0) becomes the reference
potential energy.
<P>
If the disloc option is present and the parameter <TT>Epot_diff</TT>
is 1 (which is the default), the potential energy written to
<A HREF="pictures.html"><TT>.pic</TT> files</A> and to 
<A HREF="output.html#distributions">energy distribution files</A> is 
the difference of the actual potential energy and the reference 
potential energy. This can be switched off by setting
<TT>Epot_diff</TT> to 0.
<P>
The disloc option also enables the writing of 
<A HREF="output.html#disloc">differential energy maps</A> 
in intervals of <TT>dem_int</TT>, 
and of <A HREF="output.html#disloc">differential displacement maps</A> 
in intervals of <TT>ddm_int</TT>.
The parameters needed are described together with the 
<A HREF="output.html#disloc">format of these files</A>.
<P>
The writing of these files can be switched off by setting the 
writing intervals to zero. 
<P>
<B>Known bugs:</B> The reference potential energy can be set
only once in each phase.

<A NAME="homdef">
<P><LI><B> homdef </B><P>
</A>
<P>
The homdef option allows to homogeneously expand or shear the
sample. The box is deformed in this process, together with its
contents. Note that this option requires <B>periodic</B> boundary 
conditions.
<UL>
<P><LI>
If <TT>exp_interval</TT> is positive, the sample is expanded every 
<TT>exp_interval</TT> steps. The expansion factors in x-, y- and
z-direction are given by the parameter <TT>expansion</TT>, which
is a vector. The box vectors are updated automatically, and the
cell subdivision is revised if cells have become too small
(expansion factors smaller than 1 shrink the sample).
</LI>
<P>
<LI>
If <TT>hom_interval</TT> is positive, the sample is homogeneously 
sheared every <TT>hom_interval</TT> steps. In each shear step,
<TT>shear_factor</TT>*x-coord is added to the y-coord of every
particale, and the box is updated accordingly. If cells become too 
small because of the shearing, the cell subdivision is revised 
automatically. It is assumed that the second and third box vector
point into y- and z-direction, respectively.
</LI>
</UL>

<A NAME="deform">
<P><LI><B> deform </B><P>
</A>
<P>
The deform option requires <B>free</B> boundary conditions.
If <TT>max_deform_int</TT> is positive, or <TT>ekin_threshold</TT>
is positive, atoms with negative numbers in the left half (in x
direction) of the sample are rigidly moved by an amount
<TT>strip_shift</TT>, which is a vector. Atoms with negative
numbers in the right half of the sample are moved by the opposite
vector. This happens if either the kinetic energy per particle drops 
below <TT>ekin_threshold</TT> (useful with the mik integrator),
or if the last deformation step was done <TT>max_deform_int</TT>
steps ago. If <TT>annealsteps</TT> is positive, no deformations
are done during the first <TT>annealsteps</TT> steps.
This mechanism can be used both for shears (<TT>strip_shift</TT>
parallel to sample boundary) and for compressions or expansions
(<TT>strip_shift</TT> perpendicular to sample boundary). The
atoms with negative numbers are usually located in two boundary
layers perpendicular to the x-axis.
<P>
As automatic generation of samples may lead to atoms with coordinates
close to zero (which would become negative after several shear steps) 
it is possible to apply an initial shift to the sample. For this the
flag <TT>initial_shift</TT> must be set to 1, and the vector
<TT>ins</TT> must be set to the desired value.

<A NAME="sock">
<P><LI><B>sock</B><P>
</A>
Provide support for sockets (for visualization).

<A NAME="eam">
<P><LI><B>eam</B><P>
</A>
<a href=eam.html>Uses Finnis Sinclair potentials.</a>

<A NAME="eam2">
<P><LI><B>eam2</B><P>
</A>
<a href=eam2.html>Use potentials of the general Embedded Atom Method form.</a>

<A NAME="covalent">
<P><LI><B>ttbp</B> and <B>tersoff</B><P>
<A href="covalent.html">Use many-body potentials.</A>

<A NAME="uniax">
<P><LI><B>uniax</B><P>
</A>
<a href=uniax.html>Use Gay-Berne potential for uniaxial molecules.</a>

<A NAME="pacx">
<P><LI><B>pacx</B><P>
</A>
Link with PACX libraries in addition to MPI. 
Needed for Metacomputing, but also useful if certain MPI routines are
not available. 
PACX is an extension of MPI which allows the distribution of the
simulation across a network of (possibly continent-widely) separated
supercomputers. 
<P>
IMD uses MPI_Cart routines to set up the communication network between
the PEs. This is not possible with PACX since one supercomputer sees
only the communication nodes of the other and not its
topology. Therefore the MPI_Cart routines have been replaced.
<P>
The PACX library is available from the PACX-Group at the RUS.
A description of PACX and how to use it can be found <A
HREF="http://www.hlrs.de/people/gabriel/PROJECTS/pacx/pacx.html">here</A>.

<A NAME="shock">
<P><LI><B>shock</B><P>
</A>
It is now possible to simulate shockwaves with IMD. A shockwave is
generated in the following way: We use a box which is  periodic
along the y- and z-axis. Along the x-axis there are
free boundaries. The shockwave is generated by setting the velocities
of the atoms in routine imd_maxwell within a strip
<TT>shock_strip</TT> orthogonal to the x-axis to a large constant
value <TT>shock_speed</TT>. The velocity direction is in the positive 
x-axis. 
<P>
There are two modes set by <TT>shock_mode</TT>. If <TT>shock_mode</TT>
is set to one the left part of the sample is slammed into the right
one, if the paremeter is set to 2 both parts are slammed into
oneanother.
<P>
<B>Important</B>: Currently, the atom velocities for the shockwave
are set by the routine imd_maxwell, which is called at the start
of the simulation only. It is therefore not possible to start
a shockwave in a later phase of a multiphase simulation. 
Therefore, this option is <A HREF="limitations.html">not multiphase 
ready</A>.

<A NAME="transport">
<P><LI><B>transport</B><P>
</A>
This option enables IMD to compute the heat conductivty of a
sample. It is automatically activated by the
<A HREF="ensembles.html#nvx">nvx ensemble</A>.
The sample is divided into <TT>tran_nlayers</TT> layers.
The temperature of layer 0 is initialized to 
<TT>starttemp + dTemp_start</TT>, and linearly moved to 
<TT>starttemp + dTemp_end</TT> during the simulation. Similarly, 
the temperature of layer <TT>tran_nlayers/2</TT> (in the middle of 
the sample) is initially set to <TT>starttemp - dTemp_start</TT>,
and linearly moved to <TT>starttemp - dTemp_end</TT>.
The time, the heat conductivity, and the temperatures in
layers 0 to <TT>tran_nlayers/2</TT> is written to the
file <TT>&lt;basename&gt;.tempdist</TT> every
<tt>tran_interval</tt> steps.

<A NAME="stress_tens">
<P><LI><B>stress</B><P>
</A>
This option enables imd to compute the stress or pressure tensor. 
The result will be written as a histogram into a file 
<TT>&lt;basename&gt;.&lt;n&gt;.pressdist</TT>. The output
file further contains the density, kinetic energy and potential 
energy distribution. The writing interval is given by the parameter 
<tt>press_interval</tt>, the dimension of the histogram by the
integer vector <tt>press_dim</TT>. 
<P>
In <B>shock</B> mode, only the diagonal part of the pressure
tensor is written. Further, the histogram is written as a function 
of the x-coordinate only, and averaged over the y- and z-coordinate 
(in 3d). For that purpose, the second and third component of
<tt>press_dim</TT> have to be set to 1. 
<A NAME="FBC">
<P><LI><B>fbc</B><P>
</A>
Force Boundary Conditions. If set, one can define extra forces that
are added on special atoms. To destinguish these atoms the concept of
'virtual' atomtypes is introduced. A virtual atom of type v has the
same physical properties as an atom of (real) type v modulo ntypes.
The parameter <TT>total_types</TT> must be set to the number of real
atomtypes + virtual atom types.  <P> For each virtual atomtype one can
declare in the parameter file the starting and the end value of an
extra force vector. The parameters <TT>extra_startforce</TT> and
<TT>extra_startforce</TT> expect d+1 integer numbers where d is the
sample dimension. The first integer number specifies the virtual atom
type, the other d specify the extra force vector.The values between
<TT>extra_startforce</TT> and <TT>extra_endforce</TT> are linearly
interpolated (like the temperature). For mik simulations one specifies
no <TT>extra_endforce</TT>, but a force increment
<TT>extra_dforce</TT> that is added each time the kinetic energy per
atom drops under <TT>fbc_ekin_threshold</TT> or after
<TT>fbc_waitsteps</TT> (there is also a parameter
<TT>fbc_annealsteps</TT>, see the deform option for details).  <P>
This option should work with risc and mpi versions and at least with
the NVE, NVT, AND and MIK integrators, and also with the 2d and eam2
options.<p> There is also the possibility to restrict the movement of
atomtypes to certain directions. Therefore one defines a restriction
vector for each type, with elements equal to zero in the forbidden
directions. The parameter <TT>restrictionvector</TT> expects d+1
integer numbers where d is the sample dimension. The first integer
number specifies the virtual atom type, the others must be zero for
directions into which no motion should take place. Otherwise use any
non-zero number.  This is still a little bit experimantal - it
requires a responsible user: the begining velocities should be 0 and
the temperature should be corrected for non existing degrees of
freedom. One should also keep in mind, that restricting the motion of
some atoms corresponds to a force which might affect the total impuls.
<P>Note that in the parameter file the line containing the parameter
<TT>total_types</TT> must appear <STRONG>before</STRONG> all other
parameters described in this section.
<A NAME="fnorm">
<P><LI><B> fnorm </B><P>
Calculates the scalar product of the global force vector, output in
the .eng file before the pressure. This should be a good measure for
the degree of relaxation.

<A NAME="efilter">
<P><LI><B> efilter </B><P>
Only those atoms which have a potential energy between e_pot_lower and
e_pot_upper are writen in <TT>&lt;outfile&gt;.ef.&lt;n&gt;</TT>,
where <TT>&lt;n&gt;</TT> is a running number. This happens every
ef_checkpt_int steps.


<A NAME="quasi">
<P><LI><B>quasi</B><P>
</A>
This option is required for the generation of truncated icosahedra
quasicrystals, one of the few structure types IMD can
<A HREF="config.html#generated">generate itself</A>.

<A NAME="monolj">
<P><LI><B>monolj</B><P>
</A>
Monoatomic Lennard-Jones system. The masses are all set to 1, and
particles have no number. All this saves space, which is useful for 
world records. 
<P>
<B>Editor's remark:</B> Part of this could also be achieved by
using only one mass variable per atom type, instead of one per atom.

<A NAME="single">
<P><LI><B>single</B><P>
</A>
Do everything with single precision (default is double precision).
This saves space, which is useful for world records.

<A NAME="debug">
<P><LI><B>debug</B><P>
</A>
Compile with debug flags.

<A NAME="prof">
<P><LI><B>prof</B><P>
</A>
Compile with profiling support.

</UL>
<H2>Possible Preprocessor Flags</H2>

<UL>
<A NAME="EPOT_DIFF">
<P><LI><B>EPOT_DIFF</B><P>
</A>
The EPOT_DIFF flags has been eliminated. Its functionality has been
built into the option <A HREF="#disloc">disloc</A>.

<A NAME="ZOOM">
<P><LI><B>ZOOM</B><P>
</A>
If set, only partial configurations consisting of the atoms inside the
frame defined by <A HREF="pictures.html"><TT>pic_ll</TT> and
<TT>pic_ur</TT></A> are written. It is probably better to use the 
<A HREF="pictures.html"><TT>.pic</TT></A> files to make partial 
pictures, though. ZOOM is available only in 2d at present. 

<A NAME="PAXTEST">
<P><LI><B>PAXTEST</B><P>
</A>
If set, and if the ensemble is NPT_axial, the axial pressures and
box dimensions are written to the <A HREF="output.html">energy file</A> 
as well. We might make this the default.

</UL>

<P>
<A HREF="imd.html">Back to IMD User's Guide</A> 

</BODY>
</HTML>
