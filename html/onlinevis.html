<HTML>
<HEAD>
   <TITLE>Online Visualization</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF">

<H1>Online Visualization</H1>

Online visualization of an IMD simulation can be done with the 
VolIMD program, which is a descendent of
<A
HREF="http://www.uni-stuttgart.de/RUSuser/vis/People/roland/volrend/volrend.html">VolRend</A>. In two dimensions the 2dvis program can be used.
<P>
<H1>VolIMD</H1>
VolIMD allows to communicate with a running IMD simulation via a 
socket connection.  The user can direct VolIMD to post a request 
to IMD. Every <TT>sock_int</TT> steps, IMD checks whether a request 
has been posted, and acts accordingly. We say that VolIMD acts as 
the "server", because it is on the VolIMD side where the simulation 
is controlled. IMD therefore acts as "client". In priciple, one 
could also do it the other way around, but this would be more 
tricky. Also, we don't want to block IMD on 512 CPUs just because 
VolIMD is busy rendering something and doesn't listen.
<P>
In order to use these features, IMD must be compiled with the 
<A HREF="options.html#sock">sock option</A>. The host on which
VolIMD runs must be given in the parameter <TT>display_host</TT>.
This can be the host name (fully qualified, if not locally known),
or the internet number in dotted quad format. VolIMD and IMD also
must agree on a port number. Currently, the default 31913 is used
for both programs. This can be changed in IMD with the parameter
<TT>baseport</TT>, and in VolIMD in the "Simulation" menu.
For a simulation in <B>two dimensions</B>, this must be selected
in the "Switch" menu (default is 3D).
<P>
VolIMD currently runs only on SGI machines. At 
<A HREF="http://www.itap.physik.uni-stuttgart.de">ITAP</A>, 
the compiled binary is in the default search path on these machines. 
If IMD runs on the Cray T3E at <A HREF="http://www.hlrs.de">HLRS</A>, 
there are restrictions on the allowed display hosts and port numbers. 
At <A HREF="http://www.itap.physik.uni-stuttgart.de">ITAP</A>, the only 
allowed server is <B>godot-fd.itap.physik.uni-stuttgart.de</B>, and port 
numbers must be above 2^15 (the default 31913 is ok).
<P>
In the present implementation, only three types of requests
can be posted, all with the "Simulation" menu. 
"<B>get distribution</B>" requests IMD to send histograms of 
the kinetic and potential energy distributions (whose 
dimensions are controlled by the IMD paramter <TT>dist_dim</TT>), 
"<B>get picture</B>" (only in 2D)
requests IMD to send an rgb picture of the kinetic energy 
distribution (always at resolution 400x400), and "<B>terminate</B>"
terminates IMD. In the "Switch" menu one can select whether
on wants to view the kinetic or the potential energy distribution.
<P>
There should be no problems with IMD and VolIMD running on
machines of different endianness, as IMD first sends test data,
and by looking at this test data VolIMD decides whether a byte
swap is necessary.

<H4>Known bugs</H4>
<UL>
<P><LI>The display of energy distributions in 2 dimensions is somewhat
suboptimal, to put it mildly.
<P><LI>The resolution of 2D rgb pictures should be configurable,
and should respect the aspect ratio of the sample.
</UL>


<P>
<H1>2dvis</H1> 2dvis is a visualization program that obtains its data
- a configuration or an energy distribution - either from a file or
via a socket connection. In order to use these features, IMD must be compiled with the 
<A HREF="options.html#sock">sock option</A>. The host on which
VolIMD runs must be given in the parameter <TT>display_host</TT>.
This can be the host name (fully qualified, if not locally known),
or the internet number in dotted quad format. VolIMD and IMD also
must agree on a port number. Currently, the default 31913 is used
for both programs. This can be changed in IMD with the parameter
<TT>baseport</TT>. It cannot be changed in 2dvis.
<P>
In case of a configuration each atom is
represented by a circle. It can be colour encoded by its type or its
potential energy. An element of the distribution array is displayed as
a square. Its colour is an encoding of the potential or kinetic
energy. Both data representations can be moved, rotated and
zoomed. The data can be saved to a file or written to a picture
(ppm-format).
<P>
To start the program enter '2dvis'. It might be necessary to set an
environment variable first by entering<BR>
<TT>setenv USEOWNCMAP 1</TT>.
<P>
Use the following keys to operate the program:<BR><BR>
<TABLE>
<TR><TD>1:</TD><TD>move configuration to the lower left</TD></TR>
<TR><TD>2:</TD><TD>move configuration down</TD></TR>
<TR><TD>3:</TD><TD>move configuration to the lower right</TD></TR>
<TR><TD>4:</TD><TD>move configuration to the left</TD></TR>
<TR><TD>6:</TD><TD>move configuration to the right</TD></TR>
<TR><TD>7:</TD><TD>move configuration to the upper left</TD></TR>
<TR><TD>8:</TD><TD>move configuration up</TD></TR>
<TR><TD>9:</TD><TD>move configuration to the upper right</TD></TR>
<TR><TD>0:</TD><TD>increase radius</TD></TR>
<TR><TD>.:</TD><TD>decrease radius</TD></TR>
<TR><TD>+:</TD><TD>scale configuration (larger)</TD></TR>
<TR><TD>-:</TD><TD>scale configuration (smaller)</TD></TR>
<TR><TD>*:</TD><TD>rotate about x-axis</TD></TR>
<TR><TD>/:</TD><TD>rotate about y-axis</TD></TR>
<TR><TD>a:</TD><TD>auto-scale</TD></TR>
<TR><TD>b:</TD><TD>draw bonds</TD></TR>
<TR><TD>c:</TD><TD>get configuration via socket</TD></TR>
<TR><TD>d:</TD><TD>get distribution via socket</TD></TR>
<TR><TD>e:</TD><TD>toggle type/energy encoding</TD></TR>
<TR><TD>h:</TD><TD>display this help message</TD></TR>
<TR><TD>k:</TD><TD>toggle potential/kinetic energy</TD></TR>
<TR><TD>l:</TD><TD>load IMD-configuration from file</TD></TR>
<TR><TD>p</TD><TD> make picture</TD></TR>
<TR><TD>q:</TD><TD>quit program</TD></TR>
<TR><TD>t:</TD><TD>toggle text on/off</TD></TR>
<TR><TD>u:</TD><TD>read_unit_vectors</TD></TR>
<TR><TD>w:</TD><TD>write to file</TD></TR>
</TABLE>

Additionally you can use the mouse to move, rotate and zoom the data
representation. Use the following mouse keys:
<TABLE>
<TR><TD>left</TD><TD>move</TD></TR>
<TR><TD>middle</TD><TD>rotate around x-axis</TD></TR>
<TR><TD>middle+right</TD><TD>rotate around y-axis</TD></TR>
<TR><TD>right</TD><TD>zoom</TD></TR>
</TABLE>

<H4>Known bugs</H4>
<UL>
<P><LI>Picture writes do not work correctly.
<P><LI>There might be problems with endian byte swaps.
</UL>


<P>
<A HREF="imd.html">Back to IMD User's Guide</A>

</BODY>
</HTML>