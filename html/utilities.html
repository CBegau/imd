<HTML>
<HEAD>
   <TITLE>IMD Utility Programs</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF">

<H1>IMD Utility Programs</H1>

The following utility programs can be found in the <B>imd-utils</B> 
directory.

<P>

<TABLE Border=0 Cellpadding=4 >

<TR ALIGN="LEFT">
  <TD WIDTH=180><A HREF="#cutpot">cutpot</A>
  <TD WIDTH=180><A HREF="#imd_angle">imd_angle</A>
  <TD WIDTH=180><A HREF="#imd_coord">imd_coord</A>
  <TD WIDTH=180><A HREF="#imd_dist2pgm">imd_dist2pgm.perl</A>
</TR>
<TR ALIGN="LEFT"> 
  <TD WIDTH=180><A HREF="#imd_elco">imd_elco</A>
  <TD WIDTH=180><A HREF="#imd_mklj">imd_mklj</A>
  <TD WIDTH=180><A HREF="#imd_pair">imd_pair</A> 
  <TD WIDTH=180><A HREF="#imd_power">imd_power</A>
</TR>
<TR ALIGN="LEFT"> 
  <TD WIDTH=180><A HREF="#imd_ring">imd_ring</A>
  <TD WIDTH=180><A HREF="#imd_strain">imd_strain</A>
  <TD WIDTH=180><A HREF="#imd_stress">imd_stress</A>
  <TD WIDTH=180><A HREF="#imd_torsion">imd_torsion</A>
</TR>
<TR ALIGN="LEFT"> 
  <TD WIDTH=180><A HREF="#imd2ppm">imd2ppm</A>
  <TD WIDTH=180><A HREF="#procdata">procdata</A>
</TR>
</TABLE>

<P>

<A NAME="imd_power">
<H2>imd_power.c</H2>
</A>

Computes the power spectrum of an IMD <TT>.eng</TT> file. Compile as follows:
<PRE>
    gcc -O imd_power.c -lm
</PRE>
<P>
Usage:
<PRE>
    imd_power &lt;n1&gt; &lt;n2&gt; &lt;engfile&gt;[.eng]
</PRE>
imd_power reads lines <TT>n1</TT> through <TT>n2</TT> (inclusive)
from the given <TT>.eng</TT> file (disregarding comment lines), 
and computes the fast Fourier 
transform (FFT) of columns <TT>2</TT> to <TT>n</TT>, using the time 
variable from column <TT>1</TT>. At present, a maximum of <TT>16</TT> 
columns is supported. If <TT>n2-n1+1</TT> is not a power of <TT>2</TT>, 
the remaining entries are filled with zeros (FFT requires that the 
number of data items is a power of <TT>2</TT>). The output is
written to file <TT>&lt;engfile&gt;.fft</TT>. The first column
of the output file contains the angular frequency, and the remaining 
columns the squared Fourier amplitudes for this frequency.
<P>

<A NAME="imd_mklj">
<H2>imd_mklj.c</H2>
</A>

Computes a Lennard-Jones-potential table for configurations containing
two types of atoms. 
It prompts for the following input parameters:
<P>
<STRONG>Ausgabedatei:</STRONG> Name of potential table file<BR>
<STRONG>Radius Anf. :</STRONG> Lowest value of atomic distance<BR>
<STRONG>Radius Ende :</STRONG> Largest value of atomic distance<BR>
<STRONG>Zahl Schritte:</STRONG> Number of steps in table<BR>
<STRONG>Exponent   p:</STRONG> Exponent of the repulsive part<BR>
<STRONG>Exponent   q:</STRONG> Exponent of the attractive part<BR>
<STRONG>Energie11   :</STRONG> Energy between particle of type 1 and
type 1<BR>
<STRONG>Energie22   :</STRONG> Energy between type 2 and
type 2<BR>
<STRONG>Energie12   :</STRONG> Energy between type 1 and
type 2<BR>
<STRONG>Sigma11     :</STRONG> Nearest-Neighbour-distance between
type 1 and type 1<BR>
<STRONG>Sigma22     :</STRONG> Nearest-Neighbour-distance between
type 2 and type 2<BR>
<STRONG>Sigma21     :</STRONG> Nearest-Neighbour-distance between
type 1 and type 2<BR>

<A NAME="cutpot">
<H2>cutpot.c</H2>
</A>

Cutpot can be used to shorten pair potentials. For each 
data column, a cutoff radius (or radius squared) must be specified. 
Up to this radius, the returned potential is equal to the input 
potential, but beyond thes radius it is replaced by a function which 
tends smoothly to zero. The resulting potential is continuous and has 
a continuous first derivative.  

<P>
Each line of the input potential starts either with a radius or a squared
radius, which is followed by the corresponding potential values. The
radii or squared radii, whichever are used, must be equally spaced.
For the output potential, only equally spaced, squared radii are used.
This format is required by IMD. The cutoff values must be given in the
same scale as the input potential, i.e., as radii for linear spacing,
and as squared radii for quadratic spacing.

<P>
There are two tail functions possible, a quadratic polynomial b(a-x)^2,
and an exponential function b*exp(-c/(a-x)). In the latter case, for
each column a further parameter, the steepness, can be specified, which
controls how fast the potential goes to zero. The default steepness
value is 2.0.

<P>
Cutpot requires the following parameters (here with example values), 
which must be given in the parameter file:

<PRE>
  ncols      4                  # number of data (potential) columns
  nsteps     2000               # number of lines in output potential
  infile     input.pot          # input potential file
  outfile    output.pot         # output potential file
  spacing    lin                # spacing of input potential; lin or sqr
  tailtype   sqr                # type of tail function; sqr or exp
  rcut       1.4 1.6 1.6 1.6    # cutoff values, where tail function starts
  steepness  1.5 1.5 1.5 1.5    # steepness of exponential tail function
</PRE>

Compilation:
<PRE>
  gcc -o cutpot -O cutpot.c -lm
</PRE>
Usage:
<PRE>
  cutpot &lt;paramfile&gt;
</PRE>
 
<A NAME="imd_pair">
<H2>imd_pair.c</H2>
</A>

Computes radial distribution histograms. Compile as follows:
<PRE>
    gcc -O [-DTWOD] [-DSLOTS=&lt;nnn&gt;] [-DSINGLE] imd_pair.c -lm
</PRE>
Default is a program for 3D, but if the flag <TT>-DTWOD</TT> is 
present, a program for 2D is compiled. With the flag 
<TT>-DSLOTS=&lt;nnn&gt;</TT>, the number of slots in the histogram
can be chosen. The default is 1000. The flag <TT>-DSINGLE</TT> 
produces a binary using floats instead of doubles.
<P>
imd_pair produces radial distribution histograms from IMD
configuration files (or checkpoints). Usage is as follows:
<PRE>
    imd_pair [-v] [-r&lt;nn&gt;] [-A&lt;nn&gt;] [-a&lt;rmin&gt;] [-e&lt;rmax&gt;] -p &lt;paramfile&gt;
</PRE>
The parameter <TT>paramfile</TT> is mandatory. imd_pair reads the box
size, the number of atom types, and the names of the configuration and
checkpoint files from it. Also read is the parameter
<TT>pbc_dirs</TT>, which determines (like in IMD) what boundary
conditions are used. The default is to use periodic boundary
conditions.  If the restart parameter <TT>-r&lt;nn&gt;</TT> is
present, imd_pair takes the checkpoint file
<TT>&lt;outfiles&gt;.&lt;nn&gt;.chkpt</TT> as input, and reads also
the corresponding iteration file. Otherwise, the input configuration
<TT>&lt;coordname&gt;</TT> of the simulation described by
<TT>paramfile</TT> is used as input.  If the parameter
<TT>-A&lt;nn&gt;</TT> is present, imd_pair takes the avpos outfile
<TT>&lt;outfiles&gt;.&lt;nn&gt;.avp</TT> as input, and reads also the
corresponding iteration file
<TT>&lt;outfiles&gt;.&lt;nn&gt;.avp.itr</TT>.  The output file name of
imd_pair is the input file name, but with <TT>.pair</TT> appended.
<P>
The parameters <TT>-a&lt;rmin&gt;</TT> and <TT>-e&lt;rmax&gt;</TT>
specify the minimal and maximal radius in the histogram.
They default to 0.0 and 5.0, respectively. For every slot in the
histogram, one line is written:
<PRE>
    r d_00 d_01 ... d_0N d_11 ... d_NN f_00 f_01 ... f_0N f_11 ... f_NN 
</PRE>
The first entry <TT>r</TT> is the radius, the remaining entries are
the histogram values for the different combinations of atom types.
If the flag <TT>[-v]</TT> is present, all virtual atom types are treated
as being different, and <TT>N</TT> equals <TT>vtypes-1</TT>, where 
<TT>vtypes</TT> is the number of different virtual types. Otherwise, 
all atom types are taken modulo <TT>ntypes</TT>, the number of different 
real atom types, and <TT>N</TT> equals <TT>ntypes-1</TT>. The histogram entry
<TT>d_ij</TT> is the number of times the distance <TT>r</TT> occurs 
between atoms of types <TT>i</TT> and <TT>j</TT>, devided by 
<TT>natoms</TT>, and <TT>f_ij = d_ij/(4*pi*r^2)</TT> is a normalized 
radial distribution.

<A NAME="imd_angle">
<H2>imd_angle.c</H2>
</A>
Computes angular distribution histograms. The usage is similar to
imd_pair.c. Compile as follows:
<PRE>
    gcc -O [-DTWOD] [-DSLOTS=&lt;nnn&gt;] [-DSINGLE] imd_angle.c -lm
</PRE>
Default is a program for 3D, but if the flag <TT>-DTWOD</TT> is 
present, a program for 2D is compiled. With the flag 
<TT>-DSLOTS=&lt;nnn&gt;</TT>, the number of slots in the histogram
can be chosen. The default is 1000. <TT>-DSINGLE</TT>
produces a binary using floats instead of doubles.
<P>
imd_angle produces angular distribution histograms from IMD
configuration files (or checkpoints). Usage is as follows:
<PRE>
    imd_angle [-v] [-r&lt;nn&gt;] [-A&lt;nn&gt;] [-e&lt;rmax&gt;] -p &lt;paramfile&gt;
</PRE>
The parameter <TT>paramfile</TT> is mandatory. imd_angle reads the
box size, the number of atom types, and the names of the configuration
and checkpoint files from it. Also read is the parameter <TT>pbc_dirs</TT>,
which determines (like in IMD) what boundary conditions are 
used. The default is to use periodic boundary conditions.
If the restart parameter
<TT>-r&lt;nn&gt;</TT> is present, imd_angle takes the checkpoint
file <TT>&lt;outfiles&gt;.&lt;nn&gt;.chkpt</TT> as input, and
reads also the corresponding iteration file. Otherwise, 
the input configuration <TT>&lt;coordname&gt;</TT> of the
simulation described by <TT>paramfile</TT> is used as input.
If the parameter
<TT>-A&lt;nn&gt;</TT> is present, imd_angle takes the avpos outfile
<TT>&lt;outfiles&gt;.&lt;nn&gt;.avp</TT> as input, and reads also the
corresponding iteration file
<TT>&lt;outfiles&gt;.&lt;nn&gt;.avp.itr</TT>.
The output file name of imd_angle is the input file name, 
but with <TT>.angle</TT> appended.
<P>
The parameter <TT>-e&lt;rmax&gt;</TT> specifies the maximal radius for
which angles between neighbouring atoms are computed. The default is
1.0. For every slot in the histogram, one line is written:
<PRE>
    phi g_000 g_001 ... g_00N g_011 ... g_01N ... g_0NN g_100 ... g_NNN
</PRE>
The first entry <TT>phi</TT> is the angle with range [0,180], and the 
remaining entries are the histogram values for the different 
combinations of atom types.
If the flag <TT>[-v]</TT> is present, all virtual atom types are
treated as being different, and <TT>N</TT> equals <TT>vtypes-1</TT>, 
where <TT>vtypes</TT> is the number of different virtual types. Otherwise, 
all atom types are taken modulo <TT>ntypes</TT>, the number of different 
real atom types, and <TT>N</TT> equals <TT>ntypes-1</TT>. The histogram entry
<TT>g_ijk</TT> is the normalized number of times the angle
<TT>phi</TT> occurs between the atoms of type <TT>i</TT>, <TT>j</TT>,
and <TT>k</TT> where the angle is centered at <TT>i</TT>. <TT>g_ijk</TT>
is normalized with respect to the total number of angles computed.
In the case of 2 types of particles, for example, the histogram has the
following format:
<PRE>
    phi g_000 g_001 g_011 g_100 g_101 g_111
</PRE>

<A NAME="imd_torsion">
<H2>imd_torsion.c</H2>
</A>

Computes torsion distribution histograms. The usage is similar to
imd_pair.c. Compile as follows:
<PRE>
    gcc -O [-DSLOTS=&lt;nnn&gt;] [-DSINGLE] imd_torsion.c -lm
</PRE>
With the flag 
<TT>-DSLOTS=&lt;nnn&gt;</TT>, the number of slots in the histogram
can be chosen. The default is 1000. <TT>-DSINGLE</TT>
produces a binary using floats instead of doubles.
<P>
imd_torsion produces torsion distribution histograms from IMD
configuration files (or checkpoints). Usage is as follows:
<PRE>
    imd_torsion [-v] [-r&lt;nn&gt;] [-A&lt;nn&gt;] [-e&lt;rmax&gt;] -p &lt;paramfile&gt;
</PRE>
The parameter <TT>paramfile</TT> is mandatory. imd_torsion reads the
box size, the number of atom types, and the names of the configuration
and checkpoint files from it. Also read is the parameter <TT>pbc_dirs</TT>,
which determines (like in IMD) what boundary conditions are 
used. The default is to use periodic boundary conditions.
If the restart parameter
<TT>-r&lt;nn&gt;</TT> is present, imd_torsion takes the checkpoint
file <TT>&lt;outfiles&gt;.&lt;nn&gt;.chkpt</TT> as input, and
reads also the corresponding iteration file. Otherwise, 
the input configuration <TT>&lt;coordname&gt;</TT> of the
simulation described by <TT>paramfile</TT> is used as input.
If the parameter
<TT>-A&lt;nn&gt;</TT> is present, imd_torsion takes the avpos outfile
<TT>&lt;outfiles&gt;.&lt;nn&gt;.avp</TT> as input, and reads also the
corresponding iteration file
<TT>&lt;outfiles&gt;.&lt;nn&gt;.avp.itr</TT>.
The output file name of imd_torsion is the input file name, 
but with <TT>.torsion</TT> appended.
<P>
The parameter <TT>-e&lt;rmax&gt;</TT> specifies the maximal radius for
which torsion angles between neighbouring atoms are computed. The
default is 1.0. For every slot in the histogram, one line is written:
<PRE>
    phi g_0000 g_0001 ... g_000N g_0011 ... g_001N ... g_00NN g_0100 ... g_NNNN
</PRE>
The first entry <TT>phi</TT> is the angle with range [0,180], the 
remaining entries are
the histogram values for the different combinations of atom types.
If the flag <TT>[-v]</TT> is present, all virtual atom types are treated as 
being different, and <TT>N</TT> equals <TT>vtypes-1</TT>, where 
<TT>vtypes</TT> is the number of different virtual types. Otherwise, 
all atom types are taken modulo <TT>ntypes</TT>, the number of different 
real atom types, and <TT>N</TT> equals <TT>ntypes-1</TT>. The histogram entry
<TT>g_ijkl</TT> is the normalized number of times the torsion angle
<TT>phi</TT> occurs between the atoms of type <TT>i</TT>, <TT>j</TT>,
<TT>k</TT>, and <TT>l</TT>. 

<P>
<CENTER>
<IMG SRC="torsion.gif" WIDTH=300>
</CENTER>
<P>

<TT>g_ijkl</TT>
is normalized with respect to the total number of torsion angles computed.
In the case of 2 types of particles, for example, the histogram has the
following format:
<PRE>
  phi g_0000 g_0001 g_0011 g_0100 g_0101 g_0110 g_0111 g_1100 g_1101 g_1111
</PRE>
<P>

<A NAME="imd_coord">
<H2>imd_coord.c</H2>
</A>
Computes coordination numbers. Compile as follows:
<PRE>
    gcc -O [-DTWOD] [-DTERSOFF] [-DSINGLE] imd_coord.c -lm
</PRE>
Default is a program for 3D, but if the flag <TT>-DTWOD</TT> is
present, a program for 2D is compiled.  The flag <TT>-DSINGLE</TT>
produces a binary using floats instead of doubles. In the case of the
flag <TT>-DTERSOFF</TT>, the cutoff parameter of the Tersoff potential
are used and the coordination numbers are computed slightly different.

<P> imd_coord produces coordination numbers of atoms from IMD
configuration files (or checkpoints, or avpos outfiles). Usage is as
follows:
<PRE>
    imd_coord [-v] [-r&lt;nn&gt;] [-A&lt;nn&gt;] [-e&lt;rmax&gt;] [-g] [-l] [-C&lt;cmax&gt;] [-u] -p &lt;paramfile&gt;
</PRE>
The parameter <TT>paramfile</TT> is mandatory. imd_coord reads the box
size, the number of atom types, and the names of the configuration and
checkpoint files from it. Also read is the parameter
<TT>pbc_dirs</TT>, which determines (like in IMD) what boundary
conditions are used. The default is to use periodic boundary
conditions.  If the restart parameter <TT>-r&lt;nn&gt;</TT> is
present, imd_coord takes the checkpoint file
<TT>&lt;outfiles&gt;.&lt;nn&gt;.chkpt</TT> as input, and reads also
the corresponding iteration file. Otherwise, the input configuration
<TT>&lt;coordname&gt;</TT> of the simulation described by
<TT>paramfile</TT> is used as input.  If the parameter
<TT>-A&lt;nn&gt;</TT> is present, imd_coord takes the avpos outfile
<TT>&lt;outfiles&gt;.&lt;nn&gt;.avp</TT> as input, and reads also the
corresponding iteration file
<TT>&lt;outfiles&gt;.&lt;nn&gt;.avp.itr</TT>. <P>

<P>

The parameter <TT>-e&lt;rmax&gt;</TT> specifies the maximal distance
for which neighbouring atoms are taken into account. The default
is 1.0. imd_coord writes a table to standard output in the following format:
<PRE>
   00    c_00
   01	 c_01
   
      ...

   0N    c_0N
   10    c_10

      ...

   NN    c_NN
</PRE>
where <TT>N</TT> is one less than the number of atom types, and
<TT>c_ij</TT> is the relative occurence of the bond ij. If the flag
<TT>[-v]</TT> is present, all virtual atom types are treated as being
different, and <TT>N</TT> equals <TT>vtypes-1</TT>, where
<TT>vtypes</TT> is the number of different virtual types. Otherwise,
all atom types are taken modulo <TT>ntypes</TT>, the number of
different real atom types, and <TT>N</TT> equals <TT>ntypes-1</TT>.
<P>

The parameter <TT>-C&lt;cmax&gt;</TT> specifies the maximal
coordination number the occurence of which is computed. The default
vaue is 10. imd_coord writes a table to standard output in the
followint format:
<PRE>
   0       occ_0
   1	   occ_1

     ...

   cmax    occ_cmax
</PRE>
where <TT>occ_i</TT> is the occurence in percent of the coordination number i.

<P>

If the parameter <TT>-g</TT> is present, imd_coord writes the table of
the occurences of the coordination numbers into a file the name of
which is the input file name, but with <TT>.gcoord</TT> appended. If
the parameter <TT>-l</TT> is present, imd_coord writes the local
coordination numbers for each atom into a file the name of which is
the input file name, but with <TT>.coord</TT> appended. The output
format in this case is
<PRE>
    n type x y (z) c_tot c_0 c_1 ... c_N
</PRE>
where <TT>n</TT> is the atom number, <TT>type</TT> is the type of the
atom, <TT>x,y,(z)</TT> are the coordinates of the atom, <TT>c_tot</TT>
is the total coordination number, and <TT>c_i</TT> is the coordination
number corresponding to neighbour atoms of type <TT>i</TT>.

<P>

If imd_coord is compiled with the <TT>TERSOFF</TT> flag, the value of
<TT>rmax</TT> is computed from the cutoff parameters of the Tersoff
potential. Furthermore, the coordination numbers
<I>N<SUB>i</SUB><SUP>X</SUP></I> are computed by default as
<P>
<CENTER>
<IMG SRC="coord.gif"><BR><P>
</CENTER>
<P>
where the sum is over all neighbour atoms <I>j</I> of atom <I>i</I>
with type <I>X</I> and <I>f<SUB>c</SUB></I> is the cutoff function of
the Tersoff potential. If the option <TT>-u</TT> is used, the cutoff
function <I>f<SUB>c</SUB></I> is set equal to unity within the cutoff
radius.
<P>

<A NAME="imd_ring">
<H2>imd_ring.c</H2>
</A>

Computes ring statistics. Compile as follows:
<PRE>
    gcc -O [-DTERSOFF] [-DTWOD] [-DSINGLE] imd_ring.c -lm
</PRE> 
Default is a program for 3D, but if the flag <TT>-DTWOD</TT> is 
present, a program for 2D is compiled, provided the flag
<TT>-DTERSOFF</TT> is not used. The flag <TT>-DSINGLE</TT> 
produces a binary using floats instead of doubles.
<P>
imd_ring produces the ring statistics from IMD configuration files,
checkpoints or avpos outfiles. Usage is as follows:
<PRE>
    imd_elco [-r&lt;nn&gt;] [-A&lt;nn&gt;] [-e&lt;rmax&gt;] [-l&lt;lmax&gt;] [-n&lt;neigh_len&gt;] -p &lt;paramfile&gt;
</PRE>
The parameter <TT>paramfile</TT> is mandatory. imd_ring reads the box
size and the names of the configuration and checkpoint files from
it. If the restart parameter <TT>-r&lt;nn&gt;</TT> is present,
imd_ring takes the checkpoint file
<TT>&lt;outfiles&gt;.&lt;nn&gt;.chkpt</TT> as input, and reads also
the corresponding iteration file. Otherwise, the input configuration
<TT>&lt;coordname&gt;</TT> of the simulation described by
<TT>paramfile</TT> is used as input.  If the parameter
<TT>-A&lt;nn&gt;</TT> is present, imd_ring takes the avpos outfile
<TT>&lt;outfiles&gt;.&lt;nn&gt;.avp</TT> as input, and reads also the
corresponding iteration file
<TT>&lt;outfiles&gt;.&lt;nn&gt;.avp.itr</TT>. <P>

The parameter <TT>-e&lt;rmax&gt;</TT> specifies the maximal distance
for which neighbouring atoms are taken into account. The default
is 1.0. If the flag <TT>-DTERSOFF</TT> is used, the cutoff radii of
the Tersoff potential are employed. The integer parameter
<TT>-l&lt;lmax&gt;</TT> specifies the maximal length of rings that are
computed. The default value is 10. <P>
imd_ring writes a table to standard output of the following format: 
<PRE>
     Ring length   Total occurrence  Relative occurrence
          0              n_0                p_0
	  1		 n_1		    p_1
	  
	  .               .                  .
	  .		  .		     .
	  .		  .		     .
	  
	  lmax           n_lmax             p_lmax
</PRE>
where <TT>n_i</TT> is the number of rings of length <TT>i</TT> and
<TT>p_i</TT> is <TT>n_i</TT> divided by the total number of rings up
to the length lmax. imd_ring writes the table of
the relative occurrences of the ring lengths into a file the name of
which is the input file name, but with <TT>.ring</TT> appended.
<P>
In the ring search, imd_ring uses neighbour tables. For their memory
allocation, a parameter <TT>neigh_len</TT> being the maximal number of
neighbours has to be specified (Default 4). In the case of the Tersoff
potential, this value is taken from the parameter file.

<P>


<A NAME="imd_elco">
<H2>imd_elco.c</H2>
</A>

Computes the stress tensor, the tensor of the elastic moduli, and the
pressure derivative of the bulk modulus for a given configuration of
atoms using the potential. Compile as follows:

<PRE>
    gcc -O [-DTERSOFF] [-DSTIWEB] [-DKEATING] [-DSINGLE] imd_elco.c -lm
</PRE>
Presently, only the Tersoff potential (flag <TT>-DTERSOFF</TT>), the
Stillinger-Weber potential (flag <TT>-DSTIWEB</TT>), and the Keating
potential (flag <TT>-DKEATING</TT>) are supported. Default is a
program for the Tersoff potential. Usage is as follows:
<PRE>
    imd_elco [-r&lt;nn&gt;] [-A&lt;nn&gt;] [-e&lt;rmax&gt;] [-s] [-m] [-M] -p &lt;paramfile&gt;
</PRE>
The parameter <TT>paramfile</TT> is mandatory. imd_elco reads the box
size, the number of atom types, and the names of the configuration and
checkpoint files from it. Also read is the parameter
<TT>pbc_dirs</TT>, which determines (like in IMD) what boundary
conditions are used. The default is to use periodic boundary
conditions.  Furthermore, the potential parameters are read from the
parameter file, where the format of the imd-options <B>tersoff</B>,
<B>stiweb</B>, and <B>keating</B> are used.  If the restart parameter
<TT>-r&lt;nn&gt;</TT> is present, imd_elco takes the checkpoint file
<TT>&lt;outfiles&gt;.&lt;nn&gt;.chkpt</TT> as input, and reads also
the corresponding iteration file. Otherwise, the input configuration
<TT>&lt;coordname&gt;</TT> of the simulation described by
<TT>paramfile</TT> is used as input.  If the parameter
<TT>-A&lt;nn&gt;</TT> is present, imd_elco takes the avpos outfile
<TT>&lt;outfiles&gt;.&lt;nn&gt;.avp</TT> as input, and reads also the
corresponding iteration file
<TT>&lt;outfiles&gt;.&lt;nn&gt;.avp.itr</TT>.<P>

By default, imd_elco computes the global stress tensor sigma_ij, the
global tensor of the elastic moduli c_ab, and the global pressure
derivative of the bulk modulus B'. These values are written on the
standard output along with the potential energy, the total bulk
modulus B and the pressure p. If the option [-s] is present, imd_elco
writes the local stress tensor to a file with .stress appended to the
input filename. The output format is
<PRE>
     number type x y z s_xx s_yy s_zz s_yz s_zx s_xy vol_voronoi  
</PRE>
where <TT>number</TT> is the atom number, <TT>type</TT> is the atom
type, <TT>x,y,z</TT> are the coordinates of the atoms, <TT>s_ij</TT>
are the components of the stress tensor, and <TT>vol_voronoi</TT> is
the volume of the Voronoi cell. The stress tensor is normalized with
the volume of the Voronoi cell of the corresponding atom. The
parameter [-e&lt;rmax&gt;] specifies the maximal distance for which
neighbouring atoms are taken into account in the computation of the
Voronoi cells. It should be larger than the potential cutoff.
<P>
 
If the option [-m] is present, imd_elco writes the local elastic moduli to a
file with .elco appended to the input filename. The output format is
<PRE>
     number type x y z B c_11 c_12 c_44
</PRE>
In the case of the option [-M], imd_elco writes the complete
tensor of the elastic moduli in the format
<PRE>
     number type x y z B \
     c_11 c_12 c_13 c_22 c_23 c_33 c_44 c_45 c_46 c_55 c_56 c_66 \
     c_14 c_15 c_16 c_24 c_25 c_26 c_34 c_35 c_36
</PRE>
As in the case of the stress tensor, the elastic moduli are normalized
using the volumes of the Voronoi cells.
<P>


<A NAME="imd_strain">
<H2>imd_strain.c</H2>
</A>

Computes the strain tensor. Compile as
follows:
<PRE>
    gcc -O [-DTWOD] [-DSINGLE] imd_strain.c -lm
</PRE>
Default is a program for 3D, but if the flag <TT>-DTWOD</TT> is 
present, a program for 2D is compiled. <TT>-DSINGLE</TT>
produces a binary using floats instead of doubles.
<P>
imd_strain computes the strain tensor from the atomic
displacements. Usage is as follows: 
<PRE>
    imd_strain [-r&lt;nn&gt;] [-e&lt;rmax&gt;] [-c&lt;rcell&gt;] -p &lt;paramfile&gt;
</PRE>
The parameter <TT>paramfile</TT> is mandatory. imd_strain reads the
box size and the names of the outfiles from it. Also read is the
parameter <TT>pbc_dirs</TT>, which determines
(like in IMD) what boundary conditions are used. The default is 
to use periodic boundary conditions. 
<P>

The displacements must be given in a file with the 
following format:
<PRE>
    x y (z) dx dy (dz)
</PRE>
where <TT>x</TT>, <TT>y</TT>, <TT>z</TT> are the positions of the
atoms and <TT>dx</TT>, <TT>dy</TT>, <TT>dz</TT> are the displacements.
The displacement file must have the name
<TT>&lt;outfiles&gt;.dsp</TT>.
Alternatively, the displacement file can be created using
the option <B>disloc</B>. Then the restart parameter <TT>-r&lt;nn&gt;</TT>
should be given where <TT>&lt;nn&gt;</TT> is the number of steps
corresponding to the displacement file.
<P>
The parameter <TT>-e&lt;rmax&gt;</TT> specifies the maximal distance 
for which neighbouring atoms are taken into account in the computation
of the derivatives of the displacements. The default value is 1.0. The
optional parameter <TT>-c&lt;rcell&gt;</TT> specifies the width of the
cells in the cell decomposition used in the computation. The default value
of <TT>&lt;rcell&gt;</TT> is <TT>&lt;rmax&gt;</TT>. (For very
large systems, it is advisable to use a value larger than
<TT>&lt;rmax&gt;</TT>.)
The output file name of imd_strain is the displacement file name, but
with <TT>.strain</TT> appended.
<P>
The output file has the following format:
<PRE>
    n x y (z) e_xx e_yy (e_zz) (e_yz) (e_zx) e_xy
</PRE>
where n is a number (not the imd atom number), <TT>x</TT>, <TT>y</TT>,
<TT>z</TT> are the coordinates, and <TT>e_ij</TT> are the components
of the strain tensor.
<P>
imd_strain only computes the strain tensor if an atom possesses more
than two neighbours. Atoms with less than three neighbours are omitted
from the outfile.
<P>

<A NAME="imd_stress">
<H2>imd_stress.c</H2>
</A>

Computes the stress tensor. Compile as
follows:
<PRE>
    gcc -O [-DTWOD] imd_stress.c -lm
</PRE>
Default is a program for 3D, but if the flag <TT>-DTWOD</TT> is 
present, a program for 2D is compiled.
<P>
imd_stress computes the stress tensor from an imd <TT>.press</TT>
file. Usage is as follows: 
<PRE>
    imd_stress [-r&lt;nn&gt;] [-e&lt;rmax&gt;] -p &lt;paramfile&gt;
</PRE>
The parameter <TT>paramfile</TT> is mandatory. imd_stress reads the
box size and the names of the outfiles from it. Also read is the
parameter <TT>pbc_dirs</TT>, which determines
(like in IMD) what boundary conditions are used. The default is 
to use periodic boundary conditions. 
<P>

IMD determines the (bare) stress tensor by evaluating the virial 
corresponding to the atomic forces. imd_stress computes the true 
stress tensor by dividing the bare stress tensor of each atom by 
the volume of the Voronoi cell of the respective atom.
The bare stress tensor must be given in a file with the 
following format:
<PRE>
    x y (z) s_xx s_yy (s_zz) (s_yz) (s_zx) s_xy
</PRE>
where <TT>x</TT>, <TT>y</TT>, <TT>z</TT> are the positions of the
atoms and <TT>s_ij</TT> are the components of the bare stress tensor.
The stress file must have the name
<TT>&lt;outfiles&gt;.press</TT>.
Alternatively, the bare stress file can be created using
the option <B>stress</B> (with the parameter vector
<TT>stress_dim</TT> set equal to zero). 
Then the restart parameter <TT>-r&lt;nn&gt;</TT>
should be given where <TT>&lt;nn&gt;</TT> is the number of steps
corresponding to the stress file.
<P>

The parameter <TT>-e&lt;rmax&gt;</TT> specifies the maximal distance 
for which neighbouring atoms are taken into account in the computation
of the Voronoi cells. The default value is 1.0. 
The output file name of imd_stress is the bare stress file name, but
with <TT>.press</TT> replaced by <TT>.stress</TT>.
<P>
The output file has the following format:
<PRE>
    x y (z) s_xx s_yy (s_zz) (s_yz) (s_zx) s_xy v
</PRE>
where <TT>s_ij</TT> are the components
of the true stress tensor of the atom with coordinates <TT>x</TT>,
<TT>y</TT>, <TT>z</TT> and <TT>v</TT> is the volume of the 
corresponding Voronoi cell.
<P>
imd_stress only computes the stress tensor if the Euler relation for a
Voronoi cell is fullfilled. Otherwise, atoms are removed from the outfile.

<P>



<A NAME="procdata">
<H2>procdata.c</H2>
</A>

Procdata converts configuration files between different formats.
It can also be used to cut out parts of a configuration, rotate
a configuration, or to stack configurations periodically.
<P>
The online help of procdata says:

<PRE>
Usage: procdata [-i{format}] [-f{format}] inputfile outputfile

-i0 reads IMD or VVMD data format (default)
-i1 reads modifti.f/tiunmodif.f output format
-f0 converts to MOLPIC format (for molgraph, default)
-f1 converts to PDB format (for rasmol)
-f2 converts to IMD format
-k keeps previous numbers (default: sort and begin from 1
-fRDF calculates radial distribution function
-Cxmin limit   cuts off atoms with x<limit
-Cxmax limit   cuts off atoms with x>limit
-Cymin limit   cuts off atoms with y<limit
-Cymax limit   cuts off atoms with y>limit
-Czmin limit   cuts off atoms with z<limit
-Czmax limit   cuts off atoms with z>limit
-Sz zincr n    stacks the structure in z-direction n times with increment zincr
                (used for generation of 2D-quasiperiodic structures)
-Rx phi   rotate by angle phi around x-axis
-Ry phi   rotate by angle phi around y-axis
-Rz phi   rotate by angle phi around z-axis
very special options are: (see source code)
-RAlCuCo -CAlCuCo  rotates AlCuCo approximant
and cuts out a rectangular piece (for approx2.inp)
</PRE>
<P>

<A NAME="imd2ppm">
<H2>imd2ppm</H2>
</A>

imd2ppm converts <A HREF="config.html">IMD configuration files</A> 
or special <A HREF="pictures.html">.pic files</A> of 2D binary 
tiling quasicrystals into ppm bitmaps, where each atom is drawn as 
a disk of appropriate radius. Compilation goes as follows: 
<PRE>
    gcc -O [-DEPOT] [-DASCII] imd2ppm.c -lm
</PRE>
If compiled with <TT>-DASCII</TT>, imd2ppm expects 
<A HREF="config.html">IMD configuration files</A> as input,
otherwise the special, binary <A HREF="pictures.html">.pic files</A>.
If compiled with <TT>-DEPOT</TT>, the potential energy of each
atom is used for the coloring, otherwise the kinetic energy is used.
Usage is as follows:
<PRE>
    imd2ppm infile E_min E_max x0 y0 width height width_pix height_pix
</PRE>
The parameters are, in this order, the input file, the lower and
upper energy treshold for the coloring, x and y coordinates of the
lower left corner of the image, width and height of the image in
user coordinates, and width and height of the image in pixels
(resolution). The output files are called <TT>&lt;infile&gt;.kin.ppm</TT>
or <TT>&lt;infile&gt;.pot.ppm</TT>, depending on whether the flag 
<TT>-DEPOT</TT> was used or not.
<P>
If the option <B>disloc</B> is used, the difference of the actual 
potential energy and a reference potential energy of each atom 
is written to the configuration files and .pic files, and so this 
difference is used for the coloring.
<P>

<A NAME="imd_dist2pgm">
<H2>imd_dist2pgm.perl</H2> 
</A>

Converts <A HREF="output.html#distributions">energy distribution files</A>
to gray maps. If you find out how exactly this works, please report!
Not clear whether this still works with the current distribution file
format!
<P>

<A HREF="imd.html">Back to IMD User's Guide</A> 

</BODY>
</HTML>
